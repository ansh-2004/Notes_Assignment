- Now the NAT instance we made in previous lecture to access internet in private instance is not more recommended because first we need to manage it our own
- also if we have multiple private instance but our nat instance is only t2 micro therefore network interface is very limited on this . But we want like to pass 100gb data per second so scalibity for nat instance is very difficult

- So instead of NAT instance use NAT Gateway. 
- So go to vpc > NAT gateway > create NAT gateway
- name this and select public subnet . allocate elastic ip 
- now go to private route table and edit it and change target to nat gateway you made 
- with nat gateway , traffic will only go outside of private instance, we can't still access private gateway from outside 


---

# Network Access Control List (NACL)

- my website was hosted on ec2 instance and suddenly there is attack on my website and multiple request per second coming to my ec2 instance again and again which causes the problem to my server 
-  so also only particular 5 ip address were there from where these requests are coming
- so i had to do something that on my ec2 instance , if anyone in the whole world is sending request to this ec2 instance of mine, then the request should reach it , but request shloud not come from these 5 ip addresses. 
- now we can think of security group here , but in security group we only allow that if any request comes from this ip address should be accepted. if it is coming from this subnet then it should be accepted . If it is coming on this port then it should be accepted . But in this case we need to deny request that if request coming from this , the don't accept, throw from outside , the request should not reach the server .
- security group is placed just before your ec2 instance. From there , the request gets filtered and reaches your instance . 
- This NACL is at the subnet level. means if any request passes the network access control list , only then it will come to your subnet 

- User made a request -> vpc -> nacl(it is called first firewall) -> security group(it can be called second firewall) -> ec2 (our server)

- if request passes through security group , then it reach our server

- so now to configure NACL , go to vpc > security > network ACLs
- if we see inbound rules of default nacl , we see it has allowed all traffic
- so we can edit inbound rule and deny that ip address from where the request coming . 
- also, always give the lowest number because nacl always see the lowest number request . 

# Difference between Security group & NACL

- security group is stateful and NACL is stateless 
```
stateful means suppose you allow port 80 to security group , we don't configure outbound rule that request from port 80 should go outside , that will manage by aws automatically but in case of nacl ,if you set inbound rule then need to set outbound rule also 
```

- security group is at instance level and NACL is at subnet level 
- also NACL will be created by default when you create vpc


---

- When we create our own NACL by giving selecting just vpc 
- if we see inbound rule /outbound rule of this then all trafic will be blocked, but in default nacl , all traffic will be allowed 
- also we need to associate  the nacl to a subnet  